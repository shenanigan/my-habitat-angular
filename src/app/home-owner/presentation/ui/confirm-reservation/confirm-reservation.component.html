<app-header [title]="(reservation ? 'Reschedule: ' : 'New Reservation: ') + amenity"></app-header>
<div class="main-container h-100 header-padding bkg-color px-3">
  <div class="border-bottom">
    <mat-calendar [minDate]="todaysDate" [selected]="selectedDate" (selectedChange)="selectDate($event)"></mat-calendar>
  </div>
  <div class="mt-3 mb-4">
    <div class="d-flex mb-2 pb-1 justify-content-between">
      <div class="label-15-700 color-primary">Choose Slot</div>
      <div class="paragraph-label">
        Availability: {{availableSlotCount}}/{{timeSlots.length}}
      </div>
    </div>
    <div class="d-flex flex-wrap" style="row-gap: 15px; column-gap: 17px">
      <div *ngFor="let timeSlot of timeSlots; let i = index" class="time-slot available-slot" [ngClass]="[
          timeSlot.available ? 'available-slot' : 'unavailable-slot',
          selectedSlot == timeSlot ? 'active' : ''
        ]" (click)="selectSlot(timeSlot)">
        {{ timeSlot.startDateTime | date: 'HH:mm' }} - {{ timeSlot.endDateTime | date: 'HH:mm' }}
      </div>
    </div>
  </div>
  <ng-container *ngFor="let payment of (homeOwner$| async)?.payments;">
    <div *ngIf="payment.status?.toLowerCase()==='pending'? 'showPopup' :'' " class="d-flex justify-content-between mb-4 dues-popup p-2">
      <img src="assets/images/ic_defaultuser.svg" class="img-72 ms-1" alt="" />
      <div>
        <div class="d-flex justify-content-between mb-1">
          <div>
            <div class="label-15-700 color-primary">Outstanding Dues</div>
            <div class="label-14-400 color-primary">
              Your annual maintenance is pending.
            </div>
          </div>
          <mat-icon (click)="showPopup = false">close</mat-icon>
        </div>
        <div class="d-flex justify-content-between align-items-center">
          <label class="label-14-400 color-primary">Amount: BD 10.50</label>
          <button class="pay-now-button" routerLink="/home-owner/payments" >Pay Now</button>
        </div>
      </div>
    </div>
  </ng-container>
  <button mat-flat-button color="primary" class="mat-flat-button w-100 mb-4" style="color: #fff"
    [disabled]="selectedSlot == undefined" (click)="confirm()">
    Confirm Reservation
  </button>
</div>